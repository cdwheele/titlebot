<!DOCTYPE html>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<title>Titlebot</title>
<link rel="stylesheet" href="../css/index.css">

<h1>Title Bot</h1>
<hr>
<div class="container">
  <div class="col-md input-form">
    <form id='url-form' method="post" action="/searchURL">
      <div id="form-div">
        <label for="url">Search URL </label><br>
        <input type="text" placeholder="www.example.com" name="url">
        <input type="submit" value="Search" class="btn btn-primary">
      </div>
    </form>

    <% if (locals.title) { %>
      <text id="title" ><%= title %></text>
    <% }
    else { %>
      <text id="title" ></text>
    <% }%>

    <% if (locals.error_msg) { %>
      <text id="error_msg" ><%= error_msg %></text>
    <% }
    else { %>
      <text id="error_msg" ></text>
    <% }%>
  </div>

  <div class="col-md history">
    <% if (locals.url_history && locals.title_history) { %>
      <table>
        <caption id="table-caption">Request History</caption>
        <tr>
          <th>URL</th><th>Title</th>
        </tr>

        <!-- Loop from last element first to get reverse list order -->
        <% for (var i = url_history.length; i > 0; i--) { %>
          <tr>
            <td><%= url_history[i] %></td>
            <td><%= title_history[i] %></td>
          </tr>
        <% } %>

      </table>
    <% }%>
  </div>
</div>
<script src="/js/frontend.js" type="text/javascript"></script>
